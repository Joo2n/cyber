# 기능 명세서

## 1. 문서 개요

### 1.1 목적
tomatopass.com 사이버 연수원의 화면별 상세 기능을 정의하고, 개발팀과 디자인팀이 참고할 수 있는 구체적인 명세를 제공

### 1.2 범위
- 모든 주요 화면의 기능 정의
- 입력/출력 데이터 명세
- 비즈니스 로직 및 예외 처리
- 사용자 인터랙션 상세

## 2. 메인 페이지 기능 명세

### 2.1 화면 ID: MP001 - 메인 페이지

#### 2.1.1 기본 정보
- **URL**: /
- **접근 권한**: 전체 사용자 (비로그인 포함)
- **응답성**: PC/Mobile 반응형

#### 2.1.2 화면 구성 요소

**Header 영역**
- **로고**: 클릭 시 메인페이지 이동
- **네비게이션 메뉴**
  - 내 강의실 (로그인 사용자만)
  - 수강신청
  - 고객지원
- **사용자 영역**
  - 비로그인: 로그인/회원가입 버튼
  - 로그인: 사용자명, 로그아웃 링크

**메인 콘텐츠 영역**
- **로그인 박스** (비로그인 사용자만 표시)
  - 아이디 입력 필드
  - 비밀번호 입력 필드
  - 보안접속 체크박스
  - 아이디 저장 체크박스
  - 로그인 버튼
  - 회원가입/아이디찾기/비밀번호찾기 링크

**공지사항 영역**
- 최신 공지사항 5개 목록
- 제목, 작성일 표시
- "더보기" 버튼

**바로가기 영역**
- 수료증 출력
- FAQ
- 학습도구

#### 2.1.3 기능 정의

**F-MP001-01: 사용자 로그인**
```
입력 데이터:
- 아이디: String, 필수, 4-20자
- 비밀번호: String, 필수, 8-20자
- 보안접속: Boolean, 선택
- 아이디저장: Boolean, 선택

처리 로직:
1. 입력값 유효성 검증
2. 데이터베이스 인증 처리
3. 세션 생성 및 쿠키 설정
4. 로그인 기록 저장

출력 데이터:
- 성공 시: 내 강의실 페이지로 리다이렉트
- 실패 시: 에러 메시지 표시

예외 처리:
- 빈 필드: "아이디와 비밀번호를 입력해주세요"
- 인증 실패: "아이디 또는 비밀번호가 일치하지 않습니다"
- 계정 잠김: "계정이 잠겨있습니다. 관리자에게 문의하세요"
- 서버 오류: "일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요"
```

**F-MP001-02: 공지사항 목록 조회**
```
입력 데이터:
- 페이지 번호: Integer, 기본값 1
- 표시 개수: Integer, 기본값 5

처리 로직:
1. 최신 공지사항 조회 (공개 상태만)
2. 제목 길이 제한 (PC: 50자, Mobile: 30자)
3. 날짜 형식 변환 (YYYY.MM.DD)

출력 데이터:
- 공지사항 목록 (ID, 제목, 작성일)
- 총 개수, 더보기 버튼 표시 여부

예외 처리:
- 데이터 없음: "등록된 공지사항이 없습니다"
- 로딩 실패: 빈 목록 표시
```

### 2.2 화면 ID: MP002 - 회원가입 페이지

#### 2.2.1 기본 정보
- **URL**: /join
- **접근 권한**: 비로그인 사용자만
- **응답성**: PC/Mobile 반응형

#### 2.2.2 화면 구성 요소

**회원가입 폼**
- **필수 정보**
  - 아이디
  - 비밀번호
  - 비밀번호 확인
  - 이름
  - 이메일
  - 전화번호
- **회사 정보**
  - 회사명
  - 부서
  - 직급
- **약관 동의**
  - 이용약관 동의 (필수)
  - 개인정보처리방침 동의 (필수)
  - 마케팅 정보 수신 동의 (선택)

#### 2.2.3 기능 정의

**F-MP002-01: 회원가입 처리**
```
입력 데이터:
- 아이디: String, 필수, 4-20자, 영문+숫자
- 비밀번호: String, 필수, 8-20자, 영문+숫자+특수문자
- 비밀번호확인: String, 필수, 비밀번호와 일치
- 이름: String, 필수, 2-10자, 한글+영문
- 이메일: String, 필수, 이메일 형식
- 전화번호: String, 필수, 숫자만, 10-11자리
- 회사명: String, 선택, 50자 이하
- 부서: String, 선택, 30자 이하
- 직급: String, 선택, 20자 이하

처리 로직:
1. 입력값 유효성 검증
2. 아이디 중복 확인
3. 이메일 중복 확인
4. 비밀번호 암호화
5. 회원 정보 저장
6. 이메일 인증 발송

출력 데이터:
- 성공 시: 이메일 인증 안내 페이지
- 실패 시: 에러 메시지 및 해당 필드 표시

예외 처리:
- 중복 아이디: "이미 사용 중인 아이디입니다"
- 중복 이메일: "이미 가입된 이메일입니다"
- 형식 오류: 각 필드별 구체적 오류 메시지
- 서버 오류: "가입 처리 중 오류가 발생했습니다"
```

## 3. 내 강의실 기능 명세

### 3.1 화면 ID: CR001 - 강의실 대시보드

#### 3.1.1 기본 정보
- **URL**: /classroom/dashboard
- **접근 권한**: 로그인 사용자만
- **응답성**: PC/Mobile 반응형

#### 3.1.2 화면 구성 요소

**학습 현황 요약**
- 전체 진도율 (원형 그래프)
- 수료 상태 표시
- D-day 카운트다운
- 오늘 학습 목표

**진행 중인 강의 목록**
- 패키지별 그룹핑
- 각 강의별 진도율
- 마지막 학습일
- 이어보기/시작하기 버튼

**최근 공지사항**
- 강의실 관련 공지 3개
- 중요 공지 구분 표시

**빠른 메뉴**
- 수료증 출력
- 강사에게 질문
- 만족도 조사
- 학습 통계

#### 3.1.3 기능 정의

**F-CR001-01: 학습 현황 조회**
```
입력 데이터:
- 사용자 ID: String, 세션에서 추출

처리 로직:
1. 사용자 수강 과정 전체 조회
2. 패키지별 진도율 계산
3. 전체 진도율 계산 (가중평균)
4. 수료 조건 확인
5. 마감일 기준 D-day 계산

출력 데이터:
- 전체 진도율: Integer (0-100)
- 수료 가능 여부: Boolean
- 수료 예정일: Date
- D-day: Integer
- 패키지별 진도율 목록

예외 처리:
- 수강 과정 없음: "수강 중인 과정이 없습니다"
- 진도 데이터 오류: 기본값 0으로 표시
```

**F-CR001-02: 강의 이어보기**
```
입력 데이터:
- 강의 ID: String, 필수
- 사용자 ID: String, 세션에서 추출

처리 로직:
1. 사용자 수강 권한 확인
2. 마지막 학습 위치 조회
3. 강의 정보 로드
4. 학습 기록 업데이트

출력 데이터:
- 강의 재생 페이지로 이동
- 마지막 학습 위치부터 재생

예외 처리:
- 권한 없음: "수강 권한이 없는 강의입니다"
- 강의 없음: "존재하지 않는 강의입니다"
- 재생 오류: "강의를 불러올 수 없습니다"
```

### 3.2 화면 ID: CR002 - 강의 재생 페이지

#### 3.2.1 기본 정보
- **URL**: /classroom/course/{courseId}
- **접근 권한**: 로그인 사용자 (수강 권한 확인)
- **응답성**: PC/Mobile 반응형

#### 3.2.2 화면 구성 요소

**비디오 플레이어**
- HTML5 Video Player
- 재생/일시정지 컨트롤
- 구간 이동 (10초 뒤로/앞으로)
- 배속 조절 (0.5x ~ 2.0x)
- 음량 조절
- 전체화면 모드
- 진도 표시바

**강의 정보**
- 강의 제목
- 강의 시간 정보
- 현재 진도율
- 이전/다음 강의 링크

**학습 도구**
- 메모 작성 영역
- 북마크 등록
- 강사에게 질문하기

#### 3.2.3 기능 정의

**F-CR002-01: 강의 재생 및 진도 관리**
```
입력 데이터:
- 강의 ID: String, URL 파라미터
- 재생 위치: Integer, 초 단위
- 사용자 ID: String, 세션에서 추출

처리 로직:
1. 수강 권한 확인
2. 강의 파일 정보 로드
3. 마지막 학습 위치 조회
4. 재생 시간 기록 (30초마다)
5. 진도율 계산 및 업데이트

출력 데이터:
- 비디오 스트림 URL
- 현재 진도율
- 학습 완료 여부

예외 처리:
- 권한 없음: 접근 차단 및 안내 메시지
- 파일 없음: "강의 파일을 찾을 수 없습니다"
- 스트리밍 오류: "네트워크 연결을 확인해주세요"
```

**F-CR002-02: 학습 메모 관리**
```
입력 데이터:
- 강의 ID: String
- 재생 위치: Integer, 초 단위
- 메모 내용: String, 1000자 이하
- 사용자 ID: String, 세션에서 추출

처리 로직:
1. 메모 유효성 검증
2. 기존 메모 확인 (같은 위치)
3. 메모 저장/수정
4. 메모 목록 업데이트

출력 데이터:
- 메모 저장 성공/실패
- 업데이트된 메모 목록

예외 처리:
- 글자 수 초과: "메모는 1000자 이하로 작성해주세요"
- 저장 실패: "메모 저장에 실패했습니다"
- 권한 없음: "메모 작성 권한이 없습니다"
```

### 3.3 화면 ID: CR003 - 수료증 출력 페이지

#### 3.3.1 기본 정보
- **URL**: /classroom/certificate
- **접근 권한**: 로그인 사용자 (수료 완료자만)
- **응답성**: PC 최적화

#### 3.3.2 화면 구성 요소

**수료증 목록**
- 수료 완료된 과정 목록
- 과정명, 수료일, 수료증 번호
- 다운로드/출력 버튼
- 미리보기 기능

**수료증 뷰어**
- PDF 뷰어
- 확대/축소 기능
- 인쇄 버튼

#### 3.3.3 기능 정의

**F-CR003-01: 수료증 생성 및 다운로드**
```
입력 데이터:
- 과정 ID: String, 필수
- 사용자 ID: String, 세션에서 추출
- 출력 형식: String (PDF/이미지)

처리 로직:
1. 수료 상태 확인
2. 수료증 템플릿 로드
3. 개인정보 및 과정정보 매핑
4. PDF 생성
5. 다운로드 로그 기록

출력 데이터:
- PDF 파일 다운로드
- 수료증 번호

예외 처리:
- 미수료: "수료하지 않은 과정입니다"
- 생성 실패: "수료증 생성에 실패했습니다"
- 파일 오류: "임시 파일 생성 오류"
```

## 4. 고객지원 기능 명세

### 4.1 화면 ID: SP001 - FAQ 페이지

#### 4.1.1 기본 정보
- **URL**: /support/faq
- **접근 권한**: 전체 사용자
- **응답성**: PC/Mobile 반응형

#### 4.1.2 화면 구성 요소

**검색 영역**
- 키워드 검색창
- 카테고리 필터
- 인기 검색어

**FAQ 목록**
- 카테고리별 분류
- 질문/답변 아코디언 UI
- 도움됨/안됨 평가 버튼
- 관련 FAQ 추천

**빠른 링크**
- 1:1 문의하기
- 전화 상담 신청
- 원격지원 요청

#### 4.1.3 기능 정의

**F-SP001-01: FAQ 검색**
```
입력 데이터:
- 검색어: String, 선택, 100자 이하
- 카테고리: String, 선택
- 페이지: Integer, 기본값 1

처리 로직:
1. 검색어 정제 및 유효성 검증
2. 제목/내용 전문 검색
3. 카테고리 필터 적용
4. 조회수 기준 정렬
5. 페이징 처리

출력 데이터:
- FAQ 목록 (제목, 요약, 카테고리, 조회수)
- 총 검색 결과 수
- 페이징 정보

예외 처리:
- 검색 결과 없음: "검색 결과가 없습니다"
- 검색어 누락: 전체 FAQ 목록 표시
- 서버 오류: "검색 중 오류가 발생했습니다"
```

### 4.2 화면 ID: SP002 - Q&A 문의 페이지

#### 4.2.1 기본 정보
- **URL**: /support/qna
- **접근 권한**: 로그인 사용자만
- **응답성**: PC/Mobile 반응형

#### 4.2.2 화면 구성 요소

**문의 작성 폼**
- 문의 유형 선택
- 제목 입력
- 내용 입력 (에디터)
- 파일 첨부 (이미지, 문서)
- 답변 알림 설정

**내 문의 목록**
- 문의 상태별 필터
- 문의일, 제목, 답변상태
- 상세보기 링크

#### 4.2.3 기능 정의

**F-SP002-01: 문의 등록**
```
입력 데이터:
- 문의 유형: String, 필수 (로그인/강의/기술/기타)
- 제목: String, 필수, 100자 이하
- 내용: String, 필수, 2000자 이하
- 첨부파일: File[], 선택, 최대 3개, 10MB 이하
- 이메일 알림: Boolean, 선택
- 사용자 ID: String, 세션에서 추출

처리 로직:
1. 입력값 유효성 검증
2. 첨부파일 검증 및 업로드
3. 문의 내용 저장
4. 담당자 배정
5. 자동 응답 메일 발송

출력 데이터:
- 문의 번호
- 예상 답변 시간
- 등록 완료 메시지

예외 처리:
- 필수 항목 누락: "필수 항목을 입력해주세요"
- 파일 크기 초과: "파일 크기는 10MB 이하로 업로드해주세요"
- 업로드 실패: "파일 업로드에 실패했습니다"
```

## 5. 시스템 관리 기능 명세

### 5.1 화면 ID: AD001 - 관리자 대시보드

#### 5.1.1 기본 정보
- **URL**: /admin/dashboard
- **접근 권한**: 관리자만
- **응답성**: PC 전용

#### 5.1.2 화면 구성 요소

**통계 대시보드**
- 전체 사용자 수
- 오늘 접속자 수
- 진행 중인 강의 수
- 문의 현황

**최근 활동**
- 신규 가입자
- 새 문의사항
- 시스템 알림

#### 5.1.3 기능 정의

**F-AD001-01: 실시간 통계 조회**
```
입력 데이터:
- 조회 기간: DateRange, 선택, 기본값 오늘
- 통계 유형: String, 선택

처리 로직:
1. 권한 확인
2. 기간별 데이터 집계
3. 차트 데이터 생성
4. 캐시 적용

출력 데이터:
- 사용자 통계
- 학습 통계
- 접속 통계

예외 처리:
- 권한 없음: 접근 차단
- 데이터 없음: 0으로 표시
```

## 6. 공통 기능 명세

### 6.1 인증 및 세션 관리

**F-COM001: 세션 유지**
```
처리 로직:
1. 세션 만료 시간 확인 (30분)
2. 활동 감지 시 세션 연장
3. 만료 전 경고 알림 (5분 전)
4. 자동 로그아웃 처리

예외 처리:
- 세션 만료: 로그인 페이지로 리다이렉트
- 중복 로그인: 기존 세션 무효화
```

### 6.2 파일 업로드 관리

**F-COM002: 파일 업로드**
```
입력 데이터:
- 파일: File, 필수
- 업로드 유형: String (프로필/문의첨부/수료증)

처리 로직:
1. 파일 확장자 검증
2. 파일 크기 검증
3. 바이러스 스캔
4. 파일명 암호화
5. 서버 저장

출력 데이터:
- 파일 URL
- 파일 크기
- 업로드 시간

예외 처리:
- 지원하지 않는 형식: "지원하지 않는 파일 형식입니다"
- 크기 초과: "파일 크기가 너무 큽니다"
- 업로드 실패: "파일 업로드에 실패했습니다"
```

### 6.3 알림 시스템

**F-COM003: 알림 발송**
```
입력 데이터:
- 사용자 ID: String, 필수
- 알림 유형: String (이메일/SMS/푸시)
- 메시지: String, 필수
- 예약 시간: DateTime, 선택

처리 로직:
1. 사용자 알림 설정 확인
2. 메시지 템플릿 적용
3. 발송 큐에 등록
4. 발송 결과 로그 기록

출력 데이터:
- 발송 성공/실패
- 발송 시간

예외 처리:
- 수신 거부: 발송 제외
- 전송 실패: 재시도 처리
```

## 7. 성능 및 보안 요구사항

### 7.1 성능 요구사항

**응답시간**
- 페이지 로딩: 3초 이내
- API 응답: 1초 이내
- 파일 업로드: 파일 크기에 비례

**동시 처리**
- 동시 접속자: 500명
- 동시 강의 시청: 200명
- 파일 업로드: 50건

### 7.2 보안 요구사항

**데이터 보호**
- 개인정보 암호화 저장
- 패스워드 해시 처리
- HTTPS 강제 적용

**접근 제어**
- 세션 기반 인증
- 권한별 메뉴 제어
- SQL Injection 방지

## 8. 모바일 특화 기능

### 8.1 터치 인터페이스

**스와이프 제스처**
- 좌우 스와이프: 이전/다음 강의 이동
- 상하 스와이프: 볼륨 조절

**터치 최적화**
- 버튼 최소 크기: 44px
- 터치 간격: 8px 이상

### 8.2 모바일 플레이어

**백그라운드 재생**
- 앱 전환 시 오디오 계속 재생
- 잠금 화면 컨트롤 표시

**오프라인 지원**
- 강의 다운로드 기능
- 진도 동기화

## 9. 에러 처리 및 로깅

### 9.1 에러 분류

**사용자 에러 (4XX)**
- 400: 잘못된 요청
- 401: 인증 필요
- 403: 권한 없음
- 404: 페이지 없음

**서버 에러 (5XX)**
- 500: 내부 서버 오류
- 502: 게이트웨이 오류
- 503: 서비스 이용 불가

### 9.2 로깅 정책

**사용자 활동 로그**
- 로그인/로그아웃
- 강의 시청 기록
- 파일 다운로드

**시스템 로그**
- 에러 발생 기록
- 성능 모니터링
- 보안 이벤트

## 10. 테스트 케이스 가이드

### 10.1 기능 테스트

**로그인 테스트**
- 정상 로그인
- 잘못된 정보 입력
- 계정 잠김 상태
- 세션 만료 처리

**강의 재생 테스트**
- 정상 재생
- 네트워크 끊김
- 브라우저 변경
- 배속 조절

### 10.2 성능 테스트

**부하 테스트**
- 동시 접속자 500명
- 대용량 파일 업로드
- 연속 API 호출

**스트레스 테스트**
- 서버 리소스 한계
- 메모리 누수 확인
- DB 커넥션 풀 한계